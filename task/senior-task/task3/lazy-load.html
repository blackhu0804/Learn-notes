<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <script src="https://cdn.staticfile.org/jquery/3.1.0/jquery.min.js"></script>
  <title>图片懒加载</title>
  <style>
    *{
      margin: 0;
      padding: 0;
    }
    li {
      list-style: none;
    }
    .container{
      width: 600px;
      margin: 0 auto;
    }
    .container li{
      float: left;
      margin: 10px 10px;
    }
    .container li img{
      width: 240px;
      height: 180px;
    }
    .clearfix::after {
      content: '';
      display: block;
      clear: both;
    }
  </style>
</head>

<body>

  <ul class="container clearfix">
    <li>
      <a href="#">
        <img src="http://img.zcool.cn/community/0115bb5715c7356ac725134349d24b.gif" data-src="http://cdn.jirengu.com/book.jirengu.com/img/1.jpg" />
      </a>
    </li>
    <li>
      <a href="#">
        <img src="http://img.zcool.cn/community/0115bb5715c7356ac725134349d24b.gif" data-src="http://cdn.jirengu.com/book.jirengu.com/img/2.jpg" />
      </a>
    </li>
    <li>
      <a href="#">
        <img id="a" src="http://img.zcool.cn/community/0115bb5715c7356ac725134349d24b.gif" data-src="http://cdn.jirengu.com/book.jirengu.com/img/3.jpg" />
      </a>
    </li>
    <li>
      <a href="#">
        <img src="http://img.zcool.cn/community/0115bb5715c7356ac725134349d24b.gif" data-src="http://cdn.jirengu.com/book.jirengu.com/img/4.jpg" />
      </a>
    </li>
    <li>
      <a href="#">
        <img src="http://img.zcool.cn/community/0115bb5715c7356ac725134349d24b.gif" data-src="http://cdn.jirengu.com/book.jirengu.com/img/5.jpg" />
      </a>
    </li>
    <li>
      <a href="#">
        <img src="http://img.zcool.cn/community/0115bb5715c7356ac725134349d24b.gif" data-src="http://cdn.jirengu.com/book.jirengu.com/img/6.jpg" />
      </a>
    </li>
    <li>
      <a href="#">
        <img src="http://img.zcool.cn/community/0115bb5715c7356ac725134349d24b.gif" data-src="http://cdn.jirengu.com/book.jirengu.com/img/7.jpg" />
      </a>
    </li>
    <li>
      <a href="#">
        <img src="http://img.zcool.cn/community/0115bb5715c7356ac725134349d24b.gif" data-src="http://cdn.jirengu.com/book.jirengu.com/img/8.jpg" />
      </a>
    </li>
    <li>
      <a href="#">
        <img id="b" src="http://img.zcool.cn/community/0115bb5715c7356ac725134349d24b.gif" data-src="http://cdn.jirengu.com/book.jirengu.com/img/9.jpg" />
      </a>
    </li>
    <li>
      <a href="#">
        <img src="http://img.zcool.cn/community/0115bb5715c7356ac725134349d24b.gif" data-src="http://cdn.jirengu.com/book.jirengu.com/img/10.jpg" />
      </a>
    </li>
    <li>
      <a href="#">
        <img src="http://img.zcool.cn/community/0115bb5715c7356ac725134349d24b.gif" data-src="http://cdn.jirengu.com/book.jirengu.com/img/11.jpg" />
      </a>
    </li>
    <li>
      <a href="#">
        <img src="http://img.zcool.cn/community/0115bb5715c7356ac725134349d24b.gif" data-src="http://cdn.jirengu.com/book.jirengu.com/img/12.jpg" />
      </a>
    </li>
    <li>
      <a href="#">
        <img src="http://img.zcool.cn/community/0115bb5715c7356ac725134349d24b.gif" data-src="http://cdn.jirengu.com/book.jirengu.com/img/13.jpg" />
      </a>
    </li>
    <li>
      <a href="#">
        <img src="http://img.zcool.cn/community/0115bb5715c7356ac725134349d24b.gif" data-src="http://cdn.jirengu.com/book.jirengu.com/img/14.jpg" />
      </a>
    </li>
    <li>
      <a href="#">
        <img src="http://img.zcool.cn/community/0115bb5715c7356ac725134349d24b.gif" data-src="http://cdn.jirengu.com/book.jirengu.com/img/15.jpg" />
      </a>
    </li>
    <li>
      <a href="#">
        <img src="http://img.zcool.cn/community/0115bb5715c7356ac725134349d24b.gif" data-src="http://cdn.jirengu.com/book.jirengu.com/img/16.jpg" />
      </a>
    </li>
  </ul>


  <script>
    
    function Exposure($target, callback){
      this.$target = $target;
      this.callback = callback;
      this.bind();
      this.check();
    }

    Exposure.prototype.bind = function(){
      var _this = this;
      $(window).on('scroll', function(){
        _this.check();
      })
    }

    Exposure.prototype.check = function(){
      if(this.isShow(this.$target)){
        this.callback(this.$target);
      }
    }

    Exposure.prototype.isShow = function(){
      var windowHeight = $(window).height(),
          scrollTop = $(window).scrollTop(),
          offsetTop = this.$target.offset().top,
          nodeHeight = this.$target.height();
      if(windowHeight + scrollTop > offsetTop && scrollTop < offsetTop + nodeHeight){
        return true;
      }
      return false;
    }

    function showImg($img){
      var imgUrl = $img.attr('data-src');
      $img.attr('src', imgUrl);
    }

    var Lazy = (function(){
      return {
        init : function($targets,callback){
          $targets.each(function(idx, target){
            new Exposure($(target), callback);
          })
        }
      }
    })();

    Lazy.init($('.container img'), function($node){
      showImg($node);
    })
  </script>
</body>

</html>