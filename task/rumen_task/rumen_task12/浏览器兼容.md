# 浏览器兼容

## 什么是浏览器兼容问题？
> 同一份代码，在不同浏览器上效果不一样。有的正常有的不正常。
- 不正常的原因是什么？(不支持？bug？)
- 如何让让它正常展示？

## 处理兼容问题的思路

- 要不要做
    - 产品的角度（产品的受众、受众的浏览器比例、效果优先还是基本功能优先）
    - 成本的角度
- 做到什么程度
    - 让哪些浏览器支持哪些效果         
- 如何做
    - 根据兼容需求选择技术框架/库（jQuery）
    - 根据兼容需求选择兼容工具（html5shiv.js、respond.js、css reset、normalize.css、Modernizr）
    - postcss
    - 条件注释、css Hack、js能力检测

### 渐进增强和优雅降级
- 渐进增强(progressive enhancement): 针对低版本浏览器进行构建页面，保证最基本的功能，然后再针对高级浏览器进行效果、交互等改进和追加功能达到更好的用户体验。
- 优雅降级 (graceful degradation): 一开始就构建完整的功能，然后再针对低版本浏览器进行兼容。


## 处理兼容问题的手段

1. 合适的框架（>=ie8）
2. jq 1.~(>=ie6),jq 2.~(>=ie9)
3. Vue(>=ie9)
4.  ..

###  CSS Hack

由于不同厂商的浏览器，比如Internet Explorer,Safari,Mozilla Firefox,Chrome等，或者是同一厂商的浏览器的不同版本，如IE6和IE7，对CSS的解析认识不完全一样，因此会导致生成的页面效果不一样，得不到我们所需要的页面效果。

这个时候我们就需要针对不同的浏览器去写不同的CSS，让它能在不同的浏览器中也能得到我们想要的页面效果。

CSS Hack大致有3种表现形式，CSS属性前缀法、选择器前缀法以及IE条件注释法（即HTML头部引用if IE）Hack，实际项目中CSS Hack大部分是针对IE浏览器不同版本之间的表现差异而引入的。

1. 属性前缀法(即类内部Hack)：例如 IE6能识别下划线""和星号" * "，IE7能识别星号" * "，但不能识别下划线""，IE6~IE10都认识"\9"，但firefox前述三个都不能认识
2. 选择器前缀法(即选择器Hack)
3. IE条件注释法(即HTML条件注释Hack)：针对所有IE(注：IE10+已经不再支持条件注释)： <!--[if IE]>IE浏览器显示的内容 <![endif]-->，针对IE6及以下版本：<!--[if lt IE 6]>只在IE6-显示的内容 <![endif]-->。这类Hack不仅对CSS生效，对写在判断语句里面的所有代码都会生效

#### 常见hack写法：
```css
.box{
  color: red;
  _color: blue; /*ie6*/
  *color: pink; /*ie67*/
  color: yellow\9;  /*ie/edge 6-8*/
}
```

####  常见属性的兼容情况
- inline-block: >=ie8
- min-width/min-height: >=ie8
- :before,:after: >=ie8
- div:hover: >=ie7
- inline-block: >=ie8
- background-size: >=ie9
- 圆角: >= ie9
- 阴影: >= ie9
- 动画/渐变: >= ie10

#### 常见兼容处理
```CSS
.clearfix:after{
  content: '';
  display: block;
  clear: both;
}
.clearfix{
  *zoom: 1; /* 仅对ie67有效 */
}
```
   
```CSS
.target{
  display: inline-block;
  *display: inline;
  *zoom: 1;
}
```

[CSS reset](https://segmentfault.com/a/1190000003021766)

### Normalize.css做了以下几件事：

- Preserves useful defaults, unlike many CSS resets.
保护有用的浏览器默认样式而不是完全去掉它们
- Normalizes styles for a wide range of elements
一般化的样式：为大部分HTML元素提供
- Corrects bugs and common browser inconsistencies
修复浏览器自身的bug并保证各浏览器的一致性
- Improves usability with subtle improvements
优化CSS可用性：用一些小技巧
- Explains what code does using detailed comments
解释代码：用注释和详细的文档来

[查询浏览器兼容性](http://caniuse.com)

[hacks](http://browserhacks.com/)